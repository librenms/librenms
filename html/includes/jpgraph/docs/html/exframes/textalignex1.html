<code><font color="#000000">
<font color="#0000BB">&lt;?php<br /></font><font color="#FF8000">//&nbsp;$Id:&nbsp;textalignex1.php,v&nbsp;1.1&nbsp;2002/10/19&nbsp;17:42:53&nbsp;aditus&nbsp;Exp&nbsp;$<br /></font><font color="#007700">require_once&nbsp;</font><font color="#DD0000">"../jpgraph.php"</font><font color="#007700">;<br />require_once&nbsp;</font><font color="#DD0000">"../jpgraph_canvas.php"</font><font color="#007700">;<br /><br />if(&nbsp;empty(</font><font color="#0000BB">$_GET</font><font color="#007700">[</font><font color="#DD0000">'a'</font><font color="#007700">])&nbsp;)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$angle</font><font color="#007700">=</font><font color="#0000BB">40</font><font color="#007700">;<br />}<br />else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$angle</font><font color="#007700">=</font><font color="#0000BB">$_GET</font><font color="#007700">[</font><font color="#DD0000">'a'</font><font color="#007700">];<br />}<br /><br /></font><font color="#0000BB">$caption&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#DD0000">"Demonstration&nbsp;of&nbsp;different&nbsp;anchor&nbsp;points&nbsp;for&nbsp;texts&nbsp;as&nbsp;specified&nbsp;with\nTextAlign().&nbsp;The&nbsp;red&nbsp;cross&nbsp;marks&nbsp;the&nbsp;coordinate&nbsp;that&nbsp;was&nbsp;given&nbsp;to\nstroke&nbsp;each&nbsp;instance&nbsp;of&nbsp;the&nbsp;string.\n(The&nbsp;green&nbsp;box&nbsp;is&nbsp;the&nbsp;bounding&nbsp;rectangle&nbsp;for&nbsp;the&nbsp;text.)"</font><font color="#007700">;<br /></font><font color="#0000BB">$txt</font><font color="#007700">=</font><font color="#DD0000">"TextAlign()"</font><font color="#007700">;<br /><br /><br /></font><font color="#FF8000">//&nbsp;Initial&nbsp;width&nbsp;and&nbsp;height&nbsp;since&nbsp;we&nbsp;need&nbsp;a&nbsp;"dummy"&nbsp;canvas&nbsp;to<br />//&nbsp;calculate&nbsp;the&nbsp;height&nbsp;of&nbsp;the&nbsp;text&nbsp;strings<br /></font><font color="#0000BB">$w</font><font color="#007700">=</font><font color="#0000BB">480</font><font color="#007700">;</font><font color="#0000BB">$h</font><font color="#007700">=</font><font color="#0000BB">50</font><font color="#007700">;<br /></font><font color="#0000BB">$xm</font><font color="#007700">=</font><font color="#0000BB">90</font><font color="#007700">;</font><font color="#0000BB">$ym</font><font color="#007700">=</font><font color="#0000BB">80</font><font color="#007700">;<br /><br /></font><font color="#0000BB">$g&nbsp;</font><font color="#007700">=&nbsp;new&nbsp;</font><font color="#0000BB">CanvasGraph</font><font color="#007700">(</font><font color="#0000BB">$w</font><font color="#007700">,</font><font color="#0000BB">$h</font><font color="#007700">);<br /><br /></font><font color="#0000BB">$aImg&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">$g</font><font color="#007700">-&gt;</font><font color="#0000BB">img</font><font color="#007700">;<br /></font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">SetFont</font><font color="#007700">(</font><font color="#0000BB">FF_ARIAL</font><font color="#007700">,</font><font color="#0000BB">FS_NORMAL</font><font color="#007700">,</font><font color="#0000BB">16</font><font color="#007700">);<br /></font><font color="#0000BB">$tw</font><font color="#007700">=</font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">GetBBoxWidth</font><font color="#007700">(</font><font color="#0000BB">$txt</font><font color="#007700">,</font><font color="#0000BB">$angle</font><font color="#007700">);<br /></font><font color="#0000BB">$th</font><font color="#007700">=</font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">GetBBoxHeight</font><font color="#007700">(</font><font color="#0000BB">$txt</font><font color="#007700">,</font><font color="#0000BB">$angle</font><font color="#007700">);<br /><br /></font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">SetFont</font><font color="#007700">(</font><font color="#0000BB">FF_ARIAL</font><font color="#007700">,</font><font color="#0000BB">FS_NORMAL</font><font color="#007700">,</font><font color="#0000BB">11</font><font color="#007700">);<br /></font><font color="#0000BB">$ch</font><font color="#007700">=</font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">GetBBoxHeight</font><font color="#007700">(</font><font color="#0000BB">$caption</font><font color="#007700">);<br /><br /></font><font color="#FF8000">//&nbsp;Calculate&nbsp;needed&nbsp;height&nbsp;for&nbsp;the&nbsp;image<br /></font><font color="#0000BB">$h&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">3</font><font color="#007700">*</font><font color="#0000BB">$th</font><font color="#007700">+</font><font color="#0000BB">2</font><font color="#007700">*</font><font color="#0000BB">$ym&nbsp;</font><font color="#007700">+&nbsp;</font><font color="#0000BB">$ch</font><font color="#007700">;<br /></font><font color="#0000BB">$g&nbsp;</font><font color="#007700">=&nbsp;new&nbsp;</font><font color="#0000BB">CanvasGraph</font><font color="#007700">(</font><font color="#0000BB">$w</font><font color="#007700">,</font><font color="#0000BB">$h</font><font color="#007700">);<br /></font><font color="#0000BB">$aImg&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">$g</font><font color="#007700">-&gt;</font><font color="#0000BB">img</font><font color="#007700">;<br /><br /></font><font color="#0000BB">$prof&nbsp;</font><font color="#007700">=&nbsp;array(</font><font color="#DD0000">'left'</font><font color="#007700">,</font><font color="#DD0000">'top'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'center'</font><font color="#007700">,</font><font color="#DD0000">'top'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'right'</font><font color="#007700">,</font><font color="#DD0000">'top'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'left'</font><font color="#007700">,</font><font color="#DD0000">'center'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'center'</font><font color="#007700">,</font><font color="#DD0000">'center'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'right'</font><font color="#007700">,</font><font color="#DD0000">'center'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'left'</font><font color="#007700">,</font><font color="#DD0000">'bottom'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'center'</font><font color="#007700">,</font><font color="#DD0000">'bottom'</font><font color="#007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'right'</font><font color="#007700">,</font><font color="#DD0000">'bottom'</font><font color="#007700">);<br /></font><font color="#0000BB">$n&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">count</font><font color="#007700">(</font><font color="#0000BB">$prof</font><font color="#007700">)/</font><font color="#0000BB">2</font><font color="#007700">;<br /><br />for(&nbsp;</font><font color="#0000BB">$i</font><font color="#007700">=</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">$r</font><font color="#007700">=</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">$c</font><font color="#007700">=</font><font color="#0000BB">0</font><font color="#007700">;&nbsp;</font><font color="#0000BB">$i&nbsp;</font><font color="#007700">&lt;&nbsp;</font><font color="#0000BB">$n</font><font color="#007700">;&nbsp;++</font><font color="#0000BB">$i&nbsp;</font><font color="#007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$x&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">$c</font><font color="#007700">*(</font><font color="#0000BB">$tw</font><font color="#007700">+</font><font color="#0000BB">$xm</font><font color="#007700">)+</font><font color="#0000BB">$xm</font><font color="#007700">/</font><font color="#0000BB">2</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$y&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">$r</font><font color="#007700">*(</font><font color="#0000BB">$th</font><font color="#007700">+</font><font color="#0000BB">$ym</font><font color="#007700">)+</font><font color="#0000BB">$ym</font><font color="#007700">/</font><font color="#0000BB">2</font><font color="#007700">-</font><font color="#0000BB">10</font><font color="#007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">SetColor</font><font color="#007700">(</font><font color="#DD0000">'blue'</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">SetTextAlign</font><font color="#007700">(</font><font color="#0000BB">$prof</font><font color="#007700">[</font><font color="#0000BB">$i</font><font color="#007700">*</font><font color="#0000BB">2</font><font color="#007700">],</font><font color="#0000BB">$prof</font><font color="#007700">[</font><font color="#0000BB">$i</font><font color="#007700">*</font><font color="#0000BB">2</font><font color="#007700">+</font><font color="#0000BB">1</font><font color="#007700">]);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">SetFont</font><font color="#007700">(</font><font color="#0000BB">FF_ARIAL</font><font color="#007700">,</font><font color="#0000BB">FS_NORMAL</font><font color="#007700">,</font><font color="#0000BB">16</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">StrokeText</font><font color="#007700">(</font><font color="#0000BB">$x</font><font color="#007700">,</font><font color="#0000BB">$y</font><font color="#007700">,</font><font color="#0000BB">$txt</font><font color="#007700">,</font><font color="#0000BB">$angle</font><font color="#007700">,</font><font color="#DD0000">"left"</font><font color="#007700">,</font><font color="#0000BB">true</font><font color="#007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">SetColor</font><font color="#007700">(</font><font color="#DD0000">'black'</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">SetFont</font><font color="#007700">(</font><font color="#0000BB">FF_FONT1</font><font color="#007700">,</font><font color="#0000BB">FS_BOLD</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">SetTextAlign</font><font color="#007700">(</font><font color="#DD0000">'center'</font><font color="#007700">,</font><font color="#DD0000">'top'</font><font color="#007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$align&nbsp;</font><font color="#007700">=&nbsp;</font><font color="#0000BB">sprintf</font><font color="#007700">(</font><font color="#DD0000">'("%s","%s")'</font><font color="#007700">,</font><font color="#0000BB">$prof</font><font color="#007700">[</font><font color="#0000BB">$i</font><font color="#007700">*</font><font color="#0000BB">2</font><font color="#007700">],</font><font color="#0000BB">$prof</font><font color="#007700">[</font><font color="#0000BB">$i</font><font color="#007700">*</font><font color="#0000BB">2</font><font color="#007700">+</font><font color="#0000BB">1</font><font color="#007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">StrokeText</font><font color="#007700">(</font><font color="#0000BB">$c</font><font color="#007700">*(</font><font color="#0000BB">$tw</font><font color="#007700">/</font><font color="#0000BB">2</font><font color="#007700">+</font><font color="#0000BB">$xm</font><font color="#007700">)+</font><font color="#0000BB">$xm</font><font color="#007700">/</font><font color="#0000BB">2</font><font color="#007700">+</font><font color="#0000BB">$tw</font><font color="#007700">/</font><font color="#0000BB">2</font><font color="#007700">,</font><font color="#0000BB">$r</font><font color="#007700">*(</font><font color="#0000BB">$th</font><font color="#007700">/</font><font color="#0000BB">2</font><font color="#007700">+</font><font color="#0000BB">$ym</font><font color="#007700">)+</font><font color="#0000BB">$th</font><font color="#007700">+</font><font color="#0000BB">$ym</font><font color="#007700">/</font><font color="#0000BB">2</font><font color="#007700">-</font><font color="#0000BB">4</font><font color="#007700">,</font><font color="#0000BB">$align</font><font color="#007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$c</font><font color="#007700">++;<br />&nbsp;&nbsp;&nbsp;&nbsp;if(&nbsp;</font><font color="#0000BB">$c</font><font color="#007700">==</font><font color="#0000BB">3&nbsp;</font><font color="#007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$c</font><font color="#007700">=</font><font color="#0000BB">0</font><font color="#007700">;</font><font color="#0000BB">$r</font><font color="#007700">++;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">SetTextAlign</font><font color="#007700">(</font><font color="#DD0000">'center'</font><font color="#007700">,</font><font color="#DD0000">'bottom'</font><font color="#007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /></font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">SetFont</font><font color="#007700">(</font><font color="#0000BB">FF_ARIAL</font><font color="#007700">,</font><font color="#0000BB">FS_ITALIC</font><font color="#007700">,</font><font color="#0000BB">11</font><font color="#007700">);<br /></font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">StrokeText</font><font color="#007700">(</font><font color="#0000BB">$w</font><font color="#007700">/</font><font color="#0000BB">2</font><font color="#007700">,</font><font color="#0000BB">$h</font><font color="#007700">-</font><font color="#0000BB">10</font><font color="#007700">,</font><font color="#0000BB">$caption</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#DD0000">'left'</font><font color="#007700">);<br /><br /></font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">SetColor</font><font color="#007700">(</font><font color="#DD0000">'navy'</font><font color="#007700">);<br /></font><font color="#0000BB">$aImg</font><font color="#007700">-&gt;</font><font color="#0000BB">Rectangle</font><font color="#007700">(</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">0</font><font color="#007700">,</font><font color="#0000BB">$w</font><font color="#007700">-</font><font color="#0000BB">1</font><font color="#007700">,</font><font color="#0000BB">$h</font><font color="#007700">-</font><font color="#0000BB">1</font><font color="#007700">);<br /><br /></font><font color="#0000BB">$g</font><font color="#007700">-&gt;</font><font color="#0000BB">Stroke</font><font color="#007700">();<br /><br /></font><font color="#0000BB">?&gt;<br /></font><br /></font>
</code>