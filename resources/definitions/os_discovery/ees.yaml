mib: EES-POWER-MIB
modules:
  os:
    # Device header fields
    hardware: .1.3.6.1.4.1.6302.2.1.1.2.0
    version: EES-POWER-MIB::identControllerFirmwareVersion.0
    serial: EES-POWER-MIB::identControllerSerialNumber.0
    sysName: .1.3.6.1.4.1.6302.2.1.1.4.0

  sensors:
    temperature:
      data:
        - oid: psTemperatureTable
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.7.3.1.2.{{ $index }}'
          value: psTemperatureMeasurement
          index: 'psTemperatureMeasurement.{{ $index }}'
          divisor: 1000
          descr: 'Ambient {{ $psTemperatureName }}'
          skip_values:
            - { oid: psTemperatureType, op: '!=', value: '1' }
            - { oid: psTemperatureMeasurement, op: '<', value: 0 }
            - 2147483647

        - oid: psTemperatureTable
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.7.3.1.2.{{ $index }}'
          value: psTemperatureMeasurement
          index: 'psTemperatureMeasurement.{{ $index }}'
          divisor: 1000
          descr: 'Battery {{ $psTemperatureName }}'
          skip_values:
            - { oid: psTemperatureType, op: '!=', value: '2' }
            - { oid: psTemperatureMeasurement, op: '<', value: 0 }
            - 2147483647

    voltage:
      data:
        - oid: systemVoltage
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.2.0'
          divisor: 1000
          index: 'systemVoltage.0'
          descr: 'System Voltage'
          skip_values: 2147483647

        - oid: psBatteryVoltage
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.5.1.0'
          divisor: 1000
          index: 'psBatteryVoltage.0'
          descr: 'Battery Voltage'
          skip_values: 2147483647

        - oid: psInputLineAVoltage
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.6.1.0'
          divisor: 1000
          index: 'psInputLineAVoltage.0'
          descr: 'Input Line A Voltage'
          skip_values: 2147483647

        - oid: psInputLineBVoltage
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.6.2.0'
          divisor: 1000
          index: 'psInputLineBVoltage.0'
          descr: 'Input Line B Voltage'
          skip_values: 2147483647

        - oid: psInputLineCVoltage
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.6.3.0'
          divisor: 1000
          index: 'psInputLineCVoltage.0'
          descr: 'Input Line C Voltage'
          skip_values: 2147483647

        - oid: psConverterVoltage
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.13.4.0'
          divisor: 1000
          index: 'psConverterVoltage.0'
          descr: 'Converter Voltage'
          skip_values: 2147483647

    current:
      data:
        - oid: systemCurrent
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.3.0'
          divisor: 1000
          index: 'systemCurrent.0'
          descr: 'System Current'
          skip_values: 2147483647

        - oid: psTotalBatteryCurrent
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.5.2.0'
          divisor: 1000
          index: 'psTotalBatteryCurrent.0'
          descr: 'Battery Current'
          skip_values: 2147483647

        - oid: psBatteryTable
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.5.5.1.2.{{ $index }}'
          value: psBatteryCurrent
          divisor: 1000
          index: 'psBatteryTable.{{ $index }}'
          descr: '{{ $psBatteryName }} Current'

        - oid: psRectifierTable
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.11.4.1.6.{{ $index }}'
          value: psRectifierCurrent
          divisor: 1000
          index: 'psRectifierTable.{{ $index }}'
          descr: '{{ $psRectifierIdent }} Current'

        - oid: psDistributionLoadTable
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.12.2.1.2.{{ $index }}'
          value: psDistributionLoadCurrent
          divisor: 1000
          index: 'psDistributionLoadTable.{{ $index }}'
          descr: '{{ $psDistributionLoadName }} Current'

        - oid: psDistributionGeneralTable
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.12.3.1.2.{{ $index }}'
          value: psDistributionGeneralCurrent
          divisor: 1000
          index: 'psDistributionGeneralTable.{{ $index }}'
          descr: '{{ $psDistributionGeneralName }} Current'

        - oid: psTotalConverterCurrent
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.13.5.0'
          divisor: 1000
          index: 'psTotalConverterCurrent.0'
          descr: 'Converter Current'
          skip_values: 2147483647

    capacity:
      data:
        - oid: systemUsedCapacity
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.4.0'
          index: 'systemUsedCapacity.0'
          descr: 'System Used Capacity'
          skip_values: 2147483647

        - oid: rectifiersUsedCapacity
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.11.3.0'
          index: 'rectifiersUsedCapacity.0'
          descr: 'Rectifiers Used Capacity'
          skip_values: 2147483647

        - oid: psBatteryCapacity
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.5.3.0'
          index: 'psBatteryCapacity.0'
          descr: 'Battery Capacity'
          skip_values: 2147483647

    state:
      data:
        - oid: systemStatus
          state_name: systemStatus
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.1.0'
          descr: 'System Status'
          index: 'systemStatus.0'
          states:
            - { descr: unknown,   graph: 1, value: 1,  generic: 3 }
            - { descr: normal,    graph: 1, value: 2,  generic: 0 }
            - { descr: warning,   graph: 1, value: 3,  generic: 1 }
            - { descr: minor,     graph: 1, value: 4,  generic: 1 }
            - { descr: major,     graph: 1, value: 5,  generic: 2 }
            - { descr: critical,  graph: 1, value: 6,  generic: 2 }
            - { descr: unmanaged, graph: 1, value: 7,  generic: 1 }
            - { descr: restricted,graph: 1, value: 8,  generic: 1 }
            - { descr: testing,   graph: 1, value: 9,  generic: 3 }
            - { descr: disabled,  graph: 1, value: 10, generic: 1 }

        - oid: psStatusCommunication
          state_name: psStatusCommunication
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.8.0'
          descr: 'Communication Status'
          index: 'psStatusCommunication.0'
          states:
            - { descr: unknown,   graph: 1, value: 1, generic: 3 }
            - { descr: normal,    graph: 1, value: 2, generic: 0 }
            - { descr: interrupt, graph: 1, value: 3, generic: 2 }

        - oid: psStatusBatteryMode
          state_name: psStatusBatteryMode
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.9.0'
          descr: 'Battery Status'
          index: 'psStatusBatteryMode.0'
          states:
            - { descr: floatCharging, graph: 1, value: 2,  generic: 0 }
            - { descr: acFail,        graph: 1, value: 8,  generic: 2 }
            - { descr: unknown,       graph: 1, value: 1,  generic: 3 }
            - { descr: shortTest,     graph: 1, value: 3,  generic: 3 }
            - { descr: bcForTest,     graph: 1, value: 4,  generic: 3 }
            - { descr: manualTesting, graph: 1, value: 5,  generic: 3 }
            - { descr: planTesting,   graph: 1, value: 6,  generic: 3 }
            - { descr: acFailTesting, graph: 1, value: 7,  generic: 3 }
            - { descr: manualBC,      graph: 1, value: 9,  generic: 3 }
            - { descr: autoBC,        graph: 1, value: 10, generic: 3 }
            - { descr: cyclicBC,      graph: 1, value: 11, generic: 3 }
            - { descr: masterBC,      graph: 1, value: 12, generic: 3 }
            - { descr: masterBT,      graph: 1, value: 13, generic: 3 }

        - oid: psRectifierTable
          state_name: psRectifierFail
          num_oid: '.1.3.6.1.4.1.6302.2.1.2.11.4.1.8.{{ $index }}'
          value: psRectifierFail
          index: 'psRectifierFail.{{ $index }}'
          descr: '{{ $psRectifierIdent }} Fail'
          states:
            - { descr: fail,   graph: 1, value: 1, generic: 2 }
            - { descr: normal, graph: 1, value: 2, generic: 0 }
