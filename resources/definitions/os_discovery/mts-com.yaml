modules:
  os:
    hardware: ARHANGELSK-GLOBAL-REG::modelname.0
    version: ARHANGELSK-GLOBAL-REG::controllerswversion.0

  sensors:
    voltage:
      data:
        - oid: ARHANGELSK-GLOBAL-REG::systemvoltage
          num_oid: '.1.3.6.1.4.1.40865.1.6.{{ $index }}'
          divisor: 1000
          index: 'systemvoltage.{{ $index }}'
          descr: 'System Voltage'

        - oid: ARHANGELSK-GLOBAL-REG::acvoltage
          num_oid: '.1.3.6.1.4.1.40865.1.8.{{ $index }}'
          divisor: 1000
          index: 'acvoltage.{{ $index }}'
          descr: 'AC Input Voltage'

        - oid: ARHANGELSK-GLOBAL-REG::rectoutputvoltage
          num_oid: '.1.3.6.1.4.1.40865.1.6.{{ $index }}'
          divisor: 1000
          index: 'rectoutputvoltage.{{ $index }}'
          descr: 'Rectifier Output Voltage'

        - oid: ARHANGELSK-GLOBAL-REG::rectinputvoltage
          num_oid: '.1.3.6.1.4.1.40865.1.8.{{ $index }}'
          divisor: 1000
          index: 'rectinputvoltage.{{ $index }}'
          descr: 'Rectifier AC Input Voltage'

    current:
      data:
        - oid: ARHANGELSK-GLOBAL-REG::systemcurrent
          num_oid: '.1.3.6.1.4.1.40865.1.7.{{ $index }}'
          divisor: 1000
          index: 'systemcurrent.{{ $index }}'
          descr: 'System Current'

        - oid: ARHANGELSK-GLOBAL-REG::batterycurrent
          num_oid: '.1.3.6.1.4.1.40865.1.11.{{ $index }}'
          index: 'batterycurrent.{{ $index }}'
          descr: 'Battery Current'

        - oid: ARHANGELSK-GLOBAL-REG::rectoutputcurrent
          num_oid: '.1.3.6.1.4.1.40865.1.17.{{ $index }}'
          divisor: 1000
          index: 'rectoutputcurrent.{{ $index }}'
          descr: 'Rectifier Output Current'

    state:
      data:
        - oid: ARHANGELSK-GLOBAL-REG::systemstatus
          state_name: systemstatus
          num_oid: '.1.3.6.1.4.1.40865.1.5.{{ $index }}'
          descr: 'System Status'
          index: 'systemstatus.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: normal,  graph: 1, value: 1,  generic: 0 }
            - { descr: minor,   graph: 1, value: 2,  generic: 1 }
            - { descr: major,   graph: 1, value: 3,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::batterymode
          state_name: batterymode
          num_oid: '.1.3.6.1.4.1.40865.1.13.{{ $index }}'
          descr: 'Battery State'
          index: 'batterymode.{{ $index }}'
          states:
            - { descr: floatcharge,     graph: 1, value: 0,  generic: 0 }
            - { descr: floatcharge,     graph: 1, value: 1,  generic: 0 }
            - { descr: equalizecharge,  graph: 1, value: 2,  generic: 0 }

        - oid: ARHANGELSK-GLOBAL-REG::rectopenstate
          state_name: rectopenstate
          num_oid: '.1.3.6.1.4.1.40865.1.5.{{ $index }}'
          descr: 'Rectifier Status'
          index: 'rectopenstate.{{ $index }}'
          states:
            - { descr: power-on,  graph: 1, value: 0,  generic: 0 }
            - { descr: shutdown,  graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::rectpluginnotok
          state_name: rectpluginnotok
          num_oid: '.1.3.6.1.4.1.40865.1.21.{{ $index }}'
          descr: 'Rectifier Plug-In OK'
          index: 'rectpluginnotok.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::hvsdflag
          state_name: hvsdflag
          num_oid: '.1.3.6.1.4.1.40865.1.22.{{ $index }}'
          descr: 'High Voltage Shutdown - Output over voltage'
          index: 'hvsdflag.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::outputundervol
          state_name: outputundervol
          num_oid: '.1.3.6.1.4.1.40865.1.23.{{ $index }}'
          descr: 'Low Voltage Shutdown - Output under voltage'
          index: 'outputundervol.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::inputundervol
          state_name: inputundervol
          num_oid: '.1.3.6.1.4.1.40865.1.24.{{ $index }}'
          descr: 'Low Voltage Shutdown - Input under voltage'
          index: 'inputundervol.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::fanisnotrotate
          state_name: fanisnotrotate
          num_oid: '.1.3.6.1.4.1.40865.1.26.{{ $index }}'
          descr: 'Fan Status'
          index: 'fanisnotrotate.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::ambientovertemp
          state_name: ambientovertemp
          num_oid: '.1.3.6.1.4.1.40865.1.27.{{ $index }}'
          descr: 'Ambient Temperature High'
          index: 'ambientovertemp.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::ambientundertemp
          state_name: ambientundertemp
          num_oid: '.1.3.6.1.4.1.40865.1.28.{{ $index }}'
          descr: 'Ambient Temperature Low'
          index: 'ambientundertemp.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::pfcovertemp
          state_name: pfcovertemp
          num_oid: '.1.3.6.1.4.1.40865.1.29.{{ $index }}'
          descr: 'PFC Over Temperature'
          index: 'pfcovertemp.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::pfceepromfault
          state_name: pfceepromfault
          num_oid: '.1.3.6.1.4.1.40865.1.36.{{ $index }}'
          descr: 'PFC EEPROM Status'
          index: 'pfceepromfault.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::dcdcovertemp
          state_name: dcdcovertemp
          num_oid: '.1.3.6.1.4.1.40865.1.30.{{ $index }}'
          descr: 'DC-DC Over Temperature'
          index: 'dcdcovertemp.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::dcdceepromfault
          state_name: dcdceepromfault
          num_oid: '.1.3.6.1.4.1.40865.1.32.{{ $index }}'
          descr: 'DC-DC EEPROM Status'
          index: 'dcdceepromfault.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::powderatedbyacvol
          state_name: powderatedbyacvol
          num_oid: '.1.3.6.1.4.1.40865.1.33.{{ $index }}'
          descr: 'Output power derate by AC voltage'
          index: 'powderatedbyacvol.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::powderatedbytemp
          state_name: powderatedbytemp
          num_oid: '.1.3.6.1.4.1.40865.1.34.{{ $index }}'
          descr: 'Output power derate by Temperature'
          index: 'powderatedbytemp.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::currentsharenotok
          state_name: currentsharenotok
          num_oid: '.1.3.6.1.4.1.40865.1.35.{{ $index }}'
          descr: 'Rectifier Current Share Imbalance'
          index: 'currentsharenotok.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::acstopflag
          state_name: acstopflag
          num_oid: '.1.3.6.1.4.1.40865.1.38.{{ $index }}'
          descr: 'AC Input Status'
          index: 'acstopflag.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 2,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::dcvoltagealarm
          state_name: dcvoltagealarm
          num_oid: '.1.3.6.1.4.1.40865.1.39.{{ $index }}'
          descr: 'DC Output Status'
          index: 'dcvoltagealarm.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::battfusebreak
          state_name: battfusebreak
          num_oid: '.1.3.6.1.4.1.40865.1.42.{{ $index }}'
          descr: 'Battery Breaker Status'
          index: 'battfusebreak.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::loadfusebreak
          state_name: loadfusebreak
          num_oid: '.1.3.6.1.4.1.40865.1.44.{{ $index }}'
          descr: 'Load Breaker Status'
          index: 'loadfusebreak.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }

        - oid: ARHANGELSK-GLOBAL-REG::batteryprotectflag
          state_name: batteryprotectflag
          num_oid: '.1.3.6.1.4.1.40865.1.45.{{ $index }}'
          descr: 'Battery Low Voltage Disconnect'
          index: 'batteryprotectflag.{{ $index }}'
          states:
            - { descr: normal,  graph: 1, value: 0,  generic: 0 }
            - { descr: alarm,   graph: 1, value: 1,  generic: 2 }
