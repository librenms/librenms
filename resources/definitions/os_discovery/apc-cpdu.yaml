mib: PowerNet-MIB
modules:
  os:
    hardware: PowerNet-MIB::pduNamePlatePartNumber.1
    version:  PowerNet-MIB::pduNamePlateFirmwareVersion.1
    serial:   PowerNet-MIB::pduNamePlateSerialNumber.1
    features: PowerNet-MIB::pduNamePlateModelNumber.1
  sensors:
    current:
      data:
        - oid: pduOutletMeteredStatusTable
          value: pduOutletMeteredStatusCurrent
          num_oid: '.1.3.6.1.4.1.318.1.1.32.5.9.1.5.{{ $index }}'
          index: 'pduOutletMeteredStatusCurrent.{{ $index }}'
          descr: '{{ $pduOutletMeteredStatusNumber }} {{ $pduOutletMeteredStatusName }}'
          divisor: 100
          multiplier: 1
          group: 'Outlets'
          skip_values:
            - oid: pduOutletMeteredStatusNumber
              op: '='
              value: 0
    power:
      data:
        - oid: pduUnitStatusTable
          value: pduUnitStatusActivePower
          num_oid: '.1.3.6.1.4.1.318.1.1.32.2.4.1.4.{{ $index }}'
          descr: 'Active Power {{ $pduUnitStatusName }}'
          index: 'pduUnitStatusActivePower.{{ $index }}'
          group: 'PDU'
        - oid: pduUnitStatusTable
          value: pduUnitStatusPeakPower
          num_oid: '.1.3.6.1.4.1.318.1.1.32.2.4.1.6.{{ $index }}'
          descr: 'Peak Power {{ $pduUnitStatusName }}'
          index: 'pduUnitStatusPeakPower.{{ $index }}'
          group: 'PDU'
        - oid: pduOutletMeteredStatusTable
          value: pduOutletMeteredStatusActivePower
          num_oid: '.1.3.6.1.4.1.318.1.1.32.5.9.1.6.{{ $index }}'
          index: 'pduOutletMeteredStatusActivePower.{{ $index }}'
          descr: '{{ $pduOutletMeteredStatusNumber }} {{ $pduOutletMeteredStatusName }}'
          group: 'Outlets'
          skip_values:
            - oid: pduOutletMeteredStatusNumber
              op: '='
              value: 0
    power_factor:
      data:
        - oid: pduUnitStatusTable
          value: pduUnitStatusPowerFactor
          num_oid: '.1.3.6.1.4.1.318.1.1.32.2.4.1.13.{{ $index }}'
          index: 'pduUnitStatusPowerFactor.{{ $index }}'
          group: 'PDU'
          descr: '{{ $pduUnitStatusName }}'
          divisor: 100
          multiplier: 1
          low_limit: -1
          low_warn_limit: 0.85
          high_limit: 1.1
        - oid: pduOutletMeteredStatusTable
          value: pduOutletMeteredStatusPowerFactor
          num_oid: '.1.3.6.1.4.1.318.1.1.32.5.9.1.7.{{ $index }}'
          index: 'pduOutletMeteredStatusPowerFactor.{{ $index }}'
          descr: '{{ $pduOutletMeteredStatusNumber }} {{ $pduOutletMeteredStatusName }}'
          divisor: 100
          multiplier: 1
          low_limit: -1
          low_warn_limit: 0.85
          high_limit: 1.1
          group: 'Outlets'
          skip_values:
            - oid: pduOutletMeteredStatusNumber
              op: '='
              value: 0
    state:
      data:
        - oid: pduUnitStatusTable
          value: pduUnitStatusLoadState
          num_oid: '.1.3.6.1.4.1.318.1.1.32.2.4.1.3.{{ $index }}'
          descr: 'Load {{ $pduUnitStatusName }}'
          index: 'pduUnitStatusLoadState.{{ $index }}'
          group: 'PDU'
          state_name: 'apdu-pdu-load-state'
          states:
            - { value: 1, descr: 'Upper Critical', generic: 2, graph: 0 }
            - { value: 2, descr: 'Upper Warning', generic: 1, graph: 0 }
            - { value: 3, descr: 'Lower Warning', generic: 1, graph: 0 }
            - { value: 4, descr: 'Lower Critical', generic: 2, graph: 0 }
            - { value: 5, descr: 'Normal',         generic: 0, graph: 0 }
        - oid: pduOutletMeteredStatusTable
          value: pduOutletMeteredStatusLoadState
          num_oid: '.1.3.6.1.4.1.318.1.1.32.5.9.1.4.{{ $index }}'
          index: 'pduOutletMeteredStatusLoadState.{{ $index }}'
          descr: 'Load {{ $pduOutletMeteredStatusNumber }} {{ $pduOutletMeteredStatusName }}'
          state_name: apdu-pdu-outlet-load-state
          group: 'Outlets'
          skip_values:
            - oid: pduOutletMeteredStatusNumber
              op: '='
              value: 0
          states:
            - { value: 1, descr: 'Upper Critical', generic: 2, graph: 0 }
            - { value: 2, descr: 'Upper Warning', generic: 1, graph: 0 }
            - { value: 3, descr: 'Lower Warning', generic: 1, graph: 0 }
            - { value: 4, descr: 'Lower Critical', generic: 2, graph: 0 }
            - { value: 5, descr: 'Normal',         generic: 0, graph: 0 }
        - oid: pduOutletSwitchedStatusTable
          value: pduOutletSwitchedStatusState
          num_oid: '.1.3.6.1.4.1.318.1.1.32.5.4.1.4.{{ $index }}'
          index: 'pduOutletSwitchedStatusState.{{ $index }}'
          descr: 'Status {{ $pduOutletSwitchedStatusNumber }} {{ $pduOutletSwitchedStatusName }}'
          state_name: apdu-pdu-outlet-state
          group: 'Outlets'
          skip_values:
            - oid: pduOutletSwitchedStatusNumber
              op: '='
              value: 0
          states:
            - { value: 0, descr: 'off/unused', generic: 3, graph: 0 }
            - { value: 1, descr: 'on',         generic: 0, graph: 0 }

