modules:
  os:
    hardware: PowerNet-MIB::pduNamePlatePartNumber.1
    version:  PowerNet-MIB::pduNamePlateFirmwareVersion.1
    serial:   PowerNet-MIB::pduNamePlateSerialNumber.1
    features: PowerNet-MIB::pduNamePlateModelNumber.1
  sensors:
    current:
      data:
        - oid: PowerNet-MIB::pduOutletMeteredStatusTable
          value: PowerNet-MIB::pduOutletMeteredStatusCurrent
          num_oid: '.1.3.6.1.4.1.318.1.1.32.5.9.1.5.{{ $index }}'
          index: 'pduOutletMeteredStatusCurrent.{{ $index }}'
          descr: '{{ PowerNet-MIB::pduOutletMeteredStatusNumber }} {{ PowerNet-MIB::pduOutletMeteredStatusName }}'
          divisor: 100
          multiplier: 1
          group: 'Outlets'
          skip_values:
            - oid: PowerNet-MIB::pduOutletMeteredStatusNumber
              op: '='
              value: 0
    power:
      data:
        - oid: PowerNet-MIB::pduUnitStatusTable
          value: PowerNet-MIB::pduUnitStatusActivePower
          num_oid: '.1.3.6.1.4.1.318.1.1.32.2.4.1.4.{{ $index }}'
          descr: 'Active {{ PowerNet-MIB::pduUnitStatusName }}'
          index: 'pduUnitStatusActivePower.{{ $index }}'
          group: 'PDU'
        - oid: PowerNet-MIB::pduUnitStatusTable
          value: PowerNet-MIB::pduUnitStatusPeakPower
          num_oid: '.1.3.6.1.4.1.318.1.1.32.2.4.1.6.{{ $index }}'
          descr: 'Peak {{ PowerNet-MIB::pduUnitStatusName }}'
          index: 'pduUnitStatusPeakPower.{{ $index }}'
          group: 'PDU'
        - oid: PowerNet-MIB::pduOutletMeteredStatusTable
          value: PowerNet-MIB::pduOutletMeteredStatusActivePower
          num_oid: '.1.3.6.1.4.1.318.1.1.32.5.9.1.6.{{ $index }}'
          index: 'pduOutletMeteredStatusActivePower.{{ $index }}'
          descr: '{{ PowerNet-MIB::pduOutletMeteredStatusNumber }} {{ PowerNet-MIB::pduOutletMeteredStatusName }}'
          group: 'Outlets'
          skip_values:
            - oid: PowerNet-MIB::pduOutletMeteredStatusNumber
              op: '='
              value: 0
    power_factor:
      data:
        - oid: PowerNet-MIB::pduUnitStatusTable
          value: PowerNet-MIB::pduUnitStatusPowerFactor
          num_oid: '.1.3.6.1.4.1.318.1.1.32.2.4.1.13.{{ $index }}'
          index: 'pduUnitStatusPowerFactor.{{ $index }}'
          group: 'PDU'
          descr: '{{ PowerNet-MIB::pduUnitStatusName }}'
          divisor: 100
          multiplier: 1
          low_limit: -1
          low_warn_limit: 0.85
          high_limit: 1.1
        - oid: PowerNet-MIB::pduOutletMeteredStatusTable
          value: PowerNet-MIB::pduOutletMeteredStatusPowerFactor
          num_oid: '.1.3.6.1.4.1.318.1.1.32.5.9.1.7.{{ $index }}'
          index: 'pduOutletMeteredStatusPowerFactor.{{ $index }}'
          descr: '{{ PowerNet-MIB::pduOutletMeteredStatusNumber }} {{ PowerNet-MIB::pduOutletMeteredStatusName }}'
          divisor: 100
          multiplier: 1
          low_limit: -1
          low_warn_limit: 0.85
          high_limit: 1.1
          group: 'Outlets'
          skip_values:
            - oid: PowerNet-MIB::pduOutletMeteredStatusNumber
              op: '='
              value: 0
    state:
      data:
        - oid: PowerNet-MIB::pduUnitStatusTable
          value: PowerNet-MIB::pduUnitStatusLoadState
          num_oid: '.1.3.6.1.4.1.318.1.1.32.2.4.1.3.{{ $index }}'
          descr: 'Load {{ PowerNet-MIB::pduUnitStatusName }}'
          index: 'pduUnitStatusLoadState.{{ $index }}'
          group: 'PDU'
          state_name: PowerNet-MIB::pduUnitStatusLoadState
          states:
            - { value: 1, descr: 'Upper Critical', generic: 2, graph: 0 }
            - { value: 2, descr: 'Upper Warning', generic: 1, graph: 0 }
            - { value: 3, descr: 'Lower Warning', generic: 1, graph: 0 }
            - { value: 4, descr: 'Lower Critical', generic: 2, graph: 0 }
            - { value: 5, descr: 'Normal',         generic: 0, graph: 0 }
        - oid: PowerNet-MIB::pduOutletMeteredStatusTable
          value: PowerNet-MIB::pduOutletMeteredStatusLoadState
          num_oid: '.1.3.6.1.4.1.318.1.1.32.5.9.1.4.{{ $index }}'
          index: 'pduOutletMeteredStatusLoadState.{{ $index }}'
          descr: 'Load {{ PowerNet-MIB::pduOutletMeteredStatusNumber }} {{ PowerNet-MIB::pduOutletMeteredStatusName }}'
          state_name: PowerNet-MIB::pduOutletMeteredStatusLoadState
          group: 'Outlets'
          skip_values:
            - oid: PowerNet-MIB::pduOutletMeteredStatusNumber
              op: '='
              value: 0
          states:
            - { value: 1, descr: 'Upper Critical', generic: 2, graph: 0 }
            - { value: 2, descr: 'Upper Warning', generic: 1, graph: 0 }
            - { value: 3, descr: 'Lower Warning', generic: 1, graph: 0 }
            - { value: 4, descr: 'Lower Critical', generic: 2, graph: 0 }
            - { value: 5, descr: 'Normal',         generic: 0, graph: 0 }
        - oid: PowerNet-MIB::pduOutletSwitchedStatusTable
          value: PowerNet-MIB::pduOutletSwitchedStatusState
          num_oid: '.1.3.6.1.4.1.318.1.1.32.5.4.1.4.{{ $index }}'
          index: 'pduOutletSwitchedStatusState.{{ $index }}'
          descr: 'Status {{ PowerNet-MIB::pduOutletSwitchedStatusNumber }} {{ PowerNet-MIB::pduOutletSwitchedStatusName }}'
          state_name: PowerNet-MIB::pduOutletSwitchedStatusState
          group: 'Outlets'
          skip_values:
            - oid: PowerNet-MIB::pduOutletSwitchedStatusNumber
              op: '='
              value: 0
          states:
            - { value: 0, descr: 'off/unused', generic: 3, graph: 0 }
            - { value: 1, descr: 'on',         generic: 0, graph: 0 }

