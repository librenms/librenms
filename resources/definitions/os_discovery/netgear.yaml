mib: NETGEAR-BOXSERVICES-PRIVATE-MIB
modules:
    mempools:
        data:
            -
                total: NETGEAR-SWITCHING-MIB::agentSwitchCpuProcessMemAvailable
                free: NETGEAR-SWITCHING-MIB::agentSwitchCpuProcessMemFree
                precision: 1024
    os:
        sysDescr_regex: '/^(?<hardware>\S+) .*, (?<version>[\d.]+),/'
        serial: ENTITY-MIB::entPhysicalSerialNum.1
        version: ENTITY-MIB::entPhysicalSoftwareRev.1
    sensors:
        additional_oids:
            data:
                -
                    oid:
                        - boxServicesNormalTempRangeMin
                        - boxServicesNormalTempRangeMax
        temperature:
            data:
                # Chassis/Switch-Temperature
                -
                    oid: boxServicesTempSensorsTable
                    value: boxServicesTempSensorTemperature
                    num_oid: '.1.3.6.1.4.1.4526.10.43.1.8.1.5.{{ $index }}'
                    descr: 'Switch {{ $subindex0 }} Sensor {{ $subindex1 }} Temperature'
                    index: 'boxServicesTempSensorTemperature.{{ $index }}'
                    low_limit: boxServicesNormalTempRangeMin
                    high_limit: boxServicesNormalTempRangeMax

                # SFP-/Port-Temperature
                -
                    oid: boxServicesFiberPortsOpticsTable
                    value: boxServicesFiberPortOpticsTemperature
                    num_oid: '.1.3.6.1.4.1.4526.10.43.1.18.1.2.{{ $index }}'
                    index: 'boxServicesFiberPortOpticsTemperature.{{ $index }}'
                    descr: 'Port {{ $index }} Optic Temperature'
                    ifIndex: true
                    group: 'Interfaces'
                    skip_values: [0, 0.0]
                    skip_value_regex: '/^\s*0(?:\.0+)?\s*(?:°C)?\s*$/i'
                    low_limit: 0
                    low_warn_limit: 5
                    warn_limit: 65
                    high_limit: 70

        dbm:
            data:
                # TX Power (Output) – Limits here: -8.2 … +0.5 dBm
                -
                    oid: boxServicesFiberPortsOpticsTable
                    value: boxServicesFiberPortOpticsPowerOut
                    num_oid: '.1.3.6.1.4.1.4526.10.43.1.18.1.5.{{ $index }}'
                    index: 'boxServicesFiberPortOpticsPowerOut.{{ $index }}'
                    descr: 'Port {{ $index }} TX Power'
                    ifIndex: true
                    group: 'Interfaces'
                    skip_values: [0, 0.0]
                    skip_value_regex: '/^\s*\+?0(?:\.0+)?\s*(?:dBm)?\s*$/i'
                    low_limit: -8.2
                    low_warn_limit: -7
                    warn_limit: 0.3
                    high_limit: 0.5

                # RX Power (Input) – Limits here: -14.4 … +0.5 dBm (overload)
                -
                    oid: boxServicesFiberPortsOpticsTable
                    value: boxServicesFiberPortOpticsPowerIn
                    num_oid: '.1.3.6.1.4.1.4526.10.43.1.18.1.6.{{ $index }}'
                    index: 'boxServicesFiberPortOpticsPowerIn.{{ $index }}'
                    descr: 'Port {{ $index }} RX Power'
                    ifIndex: true
                    group: 'Interfaces'
                    skip_values: [0, 0.0]
                    skip_value_regex: '/^\s*\+?0(?:\.0+)?\s*(?:dBm)?\s*$/i'
                    low_limit: -14.4
                    low_warn_limit: -13
                    warn_limit: 0.3
                    high_limit: 0.5

        voltage:
            data:
                # Supply Voltage Vcc – Limits: 3.15 … 3.43 V (Nominal 3.30 V)
                -
                    oid: boxServicesFiberPortsOpticsTable
                    value: boxServicesFiberPortOpticsVoltage
                    num_oid: '.1.3.6.1.4.1.4526.10.43.1.18.1.3.{{ $index }}'
                    index: 'boxServicesFiberPortOpticsVoltage.{{ $index }}'
                    descr: 'Port {{ $index }} Vcc'
                    ifIndex: true
                    group: 'Interfaces'
                    skip_values: [0, 0.0]
                    low_limit: 3.15
                    low_warn_limit: 3.20
                    warn_limit: 3.40
                    high_limit: 3.43

        current:
            data:
                # Supply Current – Limits: Low Err 20 mA, Low Warn 30 mA, High Warn 50 mA, High Err 60 mA
                -
                    oid: boxServicesFiberPortsOpticsTable
                    value: boxServicesFiberPortOpticsCurrent
                    num_oid: '.1.3.6.1.4.1.4526.10.43.1.18.1.4.{{ $index }}'
                    index: 'boxServicesFiberPortOpticsCurrent.{{ $index }}'
                    descr: 'Port {{ $index }} Current'
                    ifIndex: true
                    group: 'Interfaces'
                    skip_values: [0, 0.0]
                    divisor: 1000
                    low_limit: 0.02
                    low_warn_limit: 0.03
                    warn_limit: 0.05
                    high_limit: 0.06

        state:
            data:
                -
                    oid: boxServicesFansTable
                    value: boxServicesFanItemState
                    num_oid: '.1.3.6.1.4.1.4526.10.43.1.6.1.3.{{ $index }}'
                    descr: 'Switch {{ $subindex0 }} Fan {{ $subindex1 }} State'
                    index: 'boxServicesFanItemState.{{ $index }}'
                    state_name: boxServicesFanItemState
                    states:
                        - { value: 1, generic: 0, graph: 0, descr: notpresent }
                        - { value: 2, generic: 0, graph: 0, descr: operational }
                        - { value: 3, generic: 2, graph: 0, descr: failed }
                        - { value: 4, generic: 3, graph: 0, descr: powering }
                        - { value: 5, generic: 3, graph: 0, descr: nopower }
                        - { value: 6, generic: 3, graph: 0, descr: notpowering }
                        - { value: 7, generic: 1, graph: 0, descr: incompatible }
                -
                    oid: boxServicesPowSuppliesTable
                    value: boxServicesPowSupplyItemState
                    num_oid: '.1.3.6.1.4.1.4526.10.43.1.7.1.3.{{ $index }}'
                    descr: 'PSU {{ $subindex0 }} State'
                    index: 'boxServicesPowSupplyItemState.{{ $index }}'
                    state_name: boxServicesPowSupplyItemState
                    states:
                        - { value: 1, generic: 0, graph: 0, descr: notpresent }
                        - { value: 2, generic: 0, graph: 0, descr: operational }
                        - { value: 3, generic: 2, graph: 0, descr: failed }
                        - { value: 4, generic: 3, graph: 0, descr: powering }
                        - { value: 5, generic: 3, graph: 0, descr: nopower }
                        - { value: 6, generic: 3, graph: 0, descr: notpowering }
                        - { value: 7, generic: 1, graph: 0, descr: incompatible }
