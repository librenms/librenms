modules:
    os:
        hardware:
            - .1.3.6.1.4.1.4515.1.3.6.1.1.1.2.0 # SL-ENTITY-MIB::slEntPhysicalDescr.0
            - .1.3.6.1.4.1.4515.1.3.6.1.1.1.4.0 # SL-ENTITY-MIB::slEntPhysicalHardwareRev.0
        hardware_template: '{{ .1.3.6.1.4.1.4515.1.3.6.1.1.1.2.0 }} rev {{ .1.3.6.1.4.1.4515.1.3.6.1.1.1.4.0 }}'
        serial: .1.3.6.1.4.1.4515.1.3.6.1.1.1.7.0 # SL-ENTITY-MIB::slEntPhysicalSerialNum.0
        version: .1.3.6.1.4.1.4515.1.3.6.1.1.1.5.0 # SL-ENTITY-MIB::slEntPhysicalFirmwareRev.0
    processors:
        data:
            -
                oid: SL-MAIN-MIB::hwEntityStateEntry
                value: SL-MAIN-MIB::hwEntityCpuUsage
                num_oid: '.1.3.6.1.4.1.2011.5.25.31.1.1.1.1.5.{{ $index }}'
                descr: '{{ SL-MAIN-MIB::entPhysicalName }} Processor'
                skip_values:
                    -
                        oid: SL-MAIN-MIB::hwEntityOperStatus
                        op: '!='
                        value: 3
    sensors:
        additional_oids:
            data:
                -
                    oid:
                        - IF-MIB::ifDescr
                        - IF-MIB::ifAlias
                        - IF-MIB::ifAdminStatus
                        - SL-SFP-MIB::sfpConfigVendorPN
                        - SL-SFP-MIB::sfpConfigVendorSN
        temperature:
            data:
                -
                    oid: SL-MAIN-MIB::slmSysTemperature
                    value: SL-MAIN-MIB::slmSysTemperature
                    num_oid: '.1.3.6.1.4.1.4515.1.3.1.43.{{ $index }}'
                    descr: 'Temperature'
                    index: 'sys-temp-{{ $index }}'
                    group: 'System'
                -
                    oid: SL-SFP-MIB::sfpDiagTable
                    value: SL-SFP-MIB::sfpDiagModuleTemperature
                    num_oid: '.1.3.6.1.4.1.4515.1.10.2.1.1.34.{{ $index }}'
                    descr: '{{ IF-MIB::ifDescr }} {{ IF-MIB::ifAlias }} Temperature'
                    index: 'opt-temp-{{ $index }}'
                    group: 'Optic {{ SL-SFP-MIB::sfpConfigVendorPN }}, {{ SL-SFP-MIB::sfpConfigVendorSN }}'
                    entPhysicalIndex: '{{ $index }}'
                    entPhysicalIndex_measured: ports
                    user_func: '\LibreNMS\OS\Packetlight::offsetSfpTemperature'
                    divisor: 256
                    skip_values:
                        -
                            oid: SL-SFP-MIB::sfpDiagModuleTemperature
                            op: '='
                            value: 0
                        -
                            oid: SL-SFP-MIB::sfpDiagModuleTemperature
                            op: '='
                            value: 32768
                        -
                            oid: SL-SFP-MIB::sfpDiagModuleTemperature
                            op: '='
                            value: -32768
        count:
            data:
                -
                    oid: SL-EDFA-MIB::edfaConfigTable
                    value: SL-EDFA-MIB::edfaOscChannel
                    num_oid: '.1.3.6.1.4.1.4515.1.9.1.1.1.31.{{ $index }}'
                    descr: '{{ IF-MIB::ifDescr }} WaveLength'
                    entPhysicalIndex: '{{ $index }}'
                    entPhysicalIndex_measured: ports
                    group: '{{ SL-EDFA-MIB::edfaFreeDescription }}'
        dbm:
            data:
                -
                    oid: SL-EDFA-MIB::edfaConfigTable
                    value: SL-EDFA-MIB::edfaRxPower
                    num_oid: '.1.3.6.1.4.1.4515.1.9.1.1.1.3.{{ $index }}'
                    descr: '{{ IF-MIB::ifDescr }} Rx Power'
                    entPhysicalIndex: '{{ $index }}'
                    entPhysicalIndex_measured: ports
                    divisor: 10
                    group: '{{ SL-EDFA-MIB::edfaFreeDescription }}'
                -
                    oid: SL-EDFA-MIB::edfaConfigTable
                    value: SL-EDFA-MIB::edfaAdminOutputPower
                    num_oid: '.1.3.6.1.4.1.4515.1.9.1.1.1.13.{{ $index }}'
                    descr: '{{ IF-MIB::ifDescr }} Admin Output Power'
                    entPhysicalIndex: '{{ $index }}'
                    entPhysicalIndex_measured: ports
                    index: 'edfaAdminOutputPower-{{ $index }}'
                    divisor: 10
                    group: '{{ SL-EDFA-MIB::edfaFreeDescription }}'
                -
                    oid: SL-EDFA-MIB::edfaConfigTable
                    value: SL-EDFA-MIB::edfaOperOutputPower
                    num_oid: '.1.3.6.1.4.1.4515.1.9.1.1.1.14.{{ $index }}'
                    descr: '{{ IF-MIB::ifDescr }} Oper Output Power'
                    entPhysicalIndex: '{{ $index }}'
                    divisor: 10
                    entPhysicalIndex_measured: ports
                    index: 'edfaOperOutputPower-{{ $index }}'
                    group: '{{ SL-EDFA-MIB::edfaFreeDescription }}'
                -
                    oid: SL-SFP-MIB::sfpDiagTable
                    value: SL-SFP-MIB::sfpDiagTxOutputPower
                    num_oid: '.1.3.6.1.4.1.4515.1.10.2.1.1.37.{{ $index }}'
                    descr: '{{ IF-MIB::ifDescr }} Tx'
                    entPhysicalIndex: '{{ $index }}'
                    entPhysicalIndex_measured: ports
                    index: 'txout-{{ $index }}'
                    group: 'Optic {{ SL-SFP-MIB::sfpConfigVendorPN }}, {{ SL-SFP-MIB::sfpConfigVendorSN }}'
                    high_limit: SL-SFP-MIB::sfpDiagHighTxPowerAlmThreshold
                    low_limit: SL-SFP-MIB::sfpDiagLowTxPowerAlmThreshold
                    user_func: '\LibreNMS\OS\Packetlight::convertWattToDbm'
                    skip_values:
                        -
                            oid: IF-MIB::ifAdminStatus
                            op: '!='
                            value: 1
                        -
                            oid: SL-SFP-MIB::sfpDiagHighTxPowerAlmThreshold
                            op: '='
                            value: 0
                -
                    oid: SL-SFP-MIB::sfpDiagTable
                    value: SL-SFP-MIB::sfpDiagRxInputPower
                    num_oid: '.1.3.6.1.4.1.4515.1.10.2.1.1.38.{{ $index }}'
                    descr: '{{ IF-MIB::ifDescr }} Rx'
                    entPhysicalIndex: '{{ $index }}'
                    entPhysicalIndex_measured: ports
                    index: 'Rxin-{{ $index }}'
                    group: 'Optic {{ SL-SFP-MIB::sfpConfigVendorPN }}, {{ SL-SFP-MIB::sfpConfigVendorSN }}'
                    high_limit: SL-SFP-MIB::sfpDiagHighRxPowerAlmThreshold
                    low_limit: SL-SFP-MIB::sfpDiagLowRxPowerAlmThreshold
                    user_func: '\LibreNMS\OS\Packetlight::convertWattToDbm'
                    skip_values:
                        -
                            oid: IF-MIB::ifAdminStatus
                            op: '!='
                            value: 1
                        -
                            oid: SL-SFP-MIB::sfpDiagHighRxPowerAlmThreshold
                            op: '='
                            value: 0
        quality_factor:
            data:
                -
                    oid: SL-EDFA-MIB::edfaConfigTable
                    value: SL-EDFA-MIB::edfaAdminGain
                    num_oid: '.1.3.6.1.4.1.4515.1.9.1.1.1.11.{{ $index }}'
                    descr: '{{ IF-MIB::ifDescr }} Admin Gain (dB)'
                    entPhysicalIndex: '{{ $index }}'
                    entPhysicalIndex_measured: ports
                    divisor: 10
                    index: 'edfaAdmGain-{{ $index }}'
                    group: '{{ SL-EDFA-MIB::edfaFreeDescription }}'
                -
                    oid: SL-EDFA-MIB::edfaConfigTable
                    value: SL-EDFA-MIB::edfaOperGain
                    num_oid: '.1.3.6.1.4.1.4515.1.9.1.1.1.12.{{ $index }}'
                    descr: '{{ IF-MIB::ifDescr }} Oper Gain (dB)'
                    entPhysicalIndex: '{{ $index }}'
                    entPhysicalIndex_measured: ports
                    divisor: 10
                    index: 'edfaOpGain-{{ $index }}'
                    group: '{{ SL-EDFA-MIB::edfaFreeDescription }}'
        state:
            data:
                -
                    oid: SL-EDFA-MIB::edfaConfigTable
                    value: SL-EDFA-MIB::edfaRedBlueType
                    num_oid: '.1.3.6.1.4.1.4515.1.9.1.1.1.32.{{ $index }}'
                    descr: '{{ IF-MIB::ifDescr }} Red Blue Type'
                    group: SL-EDFA-MIB::edfaFreeDescription
                    state_name: edfaRedBlueType
                    states:
                        - { descr: Red, graph: 1, value: 1, generic: 0 }
                        - { descr: Blue, graph: 1, value: 2, generic: 0 }
                        - { descr: None, graph: 1, value: 3, generic: 0 }
                -
                    oid: SL-EDFA-MIB::edfaConfigTable
                    value: SL-EDFA-MIB::edfaRole
                    num_oid: '.1.3.6.1.4.1.4515.1.9.1.1.1.33.{{ $index }}'
                    descr: '{{ IF-MIB::ifDescr }} Role'
                    group: SL-EDFA-MIB::edfaFreeDescription
                    state_name: edfaRole
                    states:
                        - { descr: booster, graph: 1, value: 1, generic: 0 }
                        - { descr: boosterInline, graph: 1, value: 2, generic: 0 }
                        - { descr: preamp, graph: 1, value: 3, generic: 0 }
                        - { descr: inline, graph: 1, value: 4, generic: 0 }
                        - { descr: raman, graph: 1, value: 5, generic: 0 }
                        - { descr: other, graph: 1, value: 6, generic: 0 }

